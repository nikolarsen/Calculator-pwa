<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Простой и удобный калькулятор с историей вычислений">
  <title>Калькулятор</title>

  <!-- PWA -->
  <link rel="manifest" href="./manifest.webmanifest" />
  <meta name="theme-color" content="#111111">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="./icons/apple-touch-icon-180.png">

  <!-- Стили -->
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <main class="calculator" role="application" aria-label="Калькулятор">

    <div class="topbar">
      <div class="history" id="history" aria-live="polite"></div>
    </div>

    <div class="screen" id="screen" aria-atomic="true" aria-live="off">0</div>

    <div class="keys" id="keys" role="group" aria-label="Клавиши калькулятора">
      <button class="btn left" data-action="all-clear" aria-label="Очистить всё">AC</button>
      <button class="btn left" data-action="paren" aria-label="Скобки">( )</button>
      <button class="btn left" data-action="delete" aria-label="Удалить символ">⌫</button>
      <button class="btn right op" data-value="÷" aria-label="Деление">÷</button>

      <button class="btn num" data-value="7">7</button>
      <button class="btn num" data-value="8">8</button>
      <button class="btn num" data-value="9">9</button>
      <button class="btn right op" data-value="×" aria-label="Умножение">×</button>

      <button class="btn num" data-value="4">4</button>
      <button class="btn num" data-value="5">5</button>
      <button class="btn num" data-value="6">6</button>
      <button class="btn right op" data-value="−" aria-label="Вычитание">−</button>

      <button class="btn num" data-value="1">1</button>
      <button class="btn num" data-value="2">2</button>
      <button class="btn num" data-value="3">3</button>
      <button class="btn right op" data-value="+" aria-label="Сложение">+</button>

      <!-- Нижний ряд: % 0 . = -->
      <button class="btn left" data-action="percent" aria-label="Процент">%</button>
      <button class="btn num" data-value="0">0</button>
      <button class="btn left" data-value="." aria-label="Точка">.</button>
      <button class="btn equals" data-action="equals" aria-label="Равно">=</button>
    </div>
  </main>

  <!-- Скрипты -->
  <script src="./app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js')
        .then(registration => {
          console.log('SW registered: ', registration);
          // Проверяем обновления при загрузке
          registration.update();
        })
        .catch(registrationError => {
          console.log('SW registration failed: ', registrationError);
        });
    }
  </script>
</body>
</html>
